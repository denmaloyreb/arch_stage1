# 1.7 Практическая работа

## Задача 1

**Что нужно сделать?**

Вы проектируете систему интернет-магазина, в котором есть два приложения, Order Service и Delivery Service:

Order Service отвечает за принятие заказов у клиента;
Delivery Service рассчитывает дату доставки товара в зависимости от загрузки курьерской службы.
Текущая архитектура отражена на диаграмме:

![Схема взаимодействия Order Service и Delivery Service](ex1.png)

1. Продумайте интеграцию между Order Service и Delivery Service. Сравните два подхода к интеграции — REST, синхронный подход к интеграции, и Messaging, при котором запросы отправляются асинхронно.

2. Ответьте на вопросы:

    * Какие плюсы и минусы у REST?
    * Какие плюсы и минусы у Messaging?
    * Какие факторы должны учитываться при принятии решения? *(необязательный вопрос, ответьте по желанию).

### Решение задачи

#### REST (синхронный подход к интеграции)

| Плюсы | Минусы |
|------------------------|-----------------------|
|*Совместимость практически с любыми платформами и языками программирования.* <br> Order Service и Delivery Service можно разрабатывать на разных ЯП, и они будут прекрасно взаимодействовать друг с другом.|*Таймауты.* <br> Запросы обрабатываются синхронно: пока текущий обрабатывается, следующий "ждет". При большом количестве запросов могут возникать большие задержки. Также если с API сервера будет взаимодействовать много клиентов, возможны такие же проблемы.|
|*"Дружит" с HTTP* <br> Стиль разрабатывался с прицелом на HTTP, и хорошо подходит при для работы с этим протоколом.|*Передача избыточной информации (в т.ч. из-за HATEOAS).* <br> В ответе на запрос может приходить "лишняя" информация (например, запрашивается номер телефона по ID клиента, а в ответ приходит еще адрес, статус и т.д.). Отсюда возможно влияние на скорость взаимодействия.|
|*Простота поддержки.* <br> Если нужно изменить логику обработки информации, это делается только на сервере. Вносить изменения для клиента не придется.|*Сервер — единая точка отказа.* <br> Для повышения надежности системы нужно создавать дополнительные инстансы.|
|*Хранение состояний и информации о сессиях с клиентом не предполагается.* <br> Положительно влияет на скорость обработки запросов. Можно использовать кэширование.|*Рост нагрузки на сеть при "росте" системы.* <br> Обусловлено, в частности HATEOAS и Stateless — каждый раз передается "много" информации|
|*Возможность реализации слоистой архитектуры.* <br> Между Order Service и Delivery Service можно размещать балансировщики, прокси и других "посредников", при этом изменение архитектуры системы не отразится на логике работы этих элементов||

#### Messaging (запросы отправляются асинхронно)

| Плюсы | Минусы |
|------------------------|-----------------------|
|||

#### Какие факторы должны учитываться при принятии решения

1. Масштаб системы. 